{% extends 'base.html' %}

{% block content %}
<h2>Adicionar crítica para: {{ filme.titulo }}</h2>

<form method="POST">
    {% csrf_token %}

    <div class="form-group">
        <label for="texto">Crítica:</label>
        <textarea id="texto" name="texto" class="form-control" rows="5" required></textarea>
    </div>

    <div class="form-group">
        <label>Nota:</label>
        <div class="estrelas">
            {% for i in "5.0,4.5,4.0,3.5,3.0,2.5,2.0,1.5,1.0,0.5"|split:"," %}
                <input type="radio" id="nota{{ i }}" name="nota" value="{{ i }}" required>
                <label for="nota{{ i }}" title="{{ i }} estrelas"></label>
            {% endfor %}
        </div>
    </div>

    <button type="submit" class="btn btn-primary">Enviar crítica</button>
</form>

<style>
/* Container de estrelas */
.estrelas {
    display: flex;
    flex-direction: row-reverse;
    justify-content: flex-end;
    gap: 0.1rem;
    font-size: 2rem;
}

/* Esconde os inputs */
.estrelas input {
    display: none;
}

/* Labels como estrelas */
.estrelas label {
    position: relative;
    cursor: pointer;
    color: #ccc;
}

/* Estrela inteira */
.estrelas label::before {
    content: '★';
    position: relative;
    display: block;
}

/* Meia estrela usando ::after */
.estrelas label::after {
    content: '★';
    position: absolute;
    left: 0;
    width: 50%;
    overflow: hidden;
    color: gold;
}

/* Preenchimento ao selecionar */
.estrelas input:checked ~ label::before,
.estrelas input:checked ~ label::after {
    color: gold;
}

/* Preenchimento ao hover */
.estrelas label:hover,
.estrelas label:hover ~ label {
    color: gold;
}

.estrelas label:hover::after,
.estrelas label:hover ~ label::after {
    color: gold;
}
</style>
{% endblock %}
