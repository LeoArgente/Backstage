{% extends 'base.html' %}

{% block content %}
<h2>Adicionar crítica para: {{ filme.titulo }}</h2>

<form method="POST">
    {% csrf_token %}
    <div class="form-group">
        <label for="texto">Crítica:</label>
        <textarea id="texto" name="texto" class="form-control" rows="5" required></textarea>
    </div>

    <div class="form-group">
        <label>Nota:</label>
        <div class="estrelas"></div>
    </div>

    <button type="submit" class="btn btn-primary">Enviar crítica</button>
</form>
{% endblock %}

{% block extra_css %}
<style>
.estrelas {
    display: flex;
    flex-direction: row-reverse;
    justify-content: flex-end;
    gap: 0.1rem;
    font-size: 2rem;
}
.estrelas input { display: none; }
.estrelas label {
    position: relative;
    cursor: pointer;
    color: #ccc;
}
.estrelas label::before {
    content: '★';
    position: relative;
    display: block;
}
.estrelas input:checked ~ label::before {
    color: gold;
}
</style>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener("DOMContentLoaded", function() {
    const container = document.querySelector(".estrelas");
    const notas = [5,4,3,2,1];

    notas.forEach(valor => {
        const input = document.createElement("input");
        input.type = "radio";
        input.id = "nota" + valor;
        input.name = "nota";
        input.value = valor;

        const label = document.createElement("label");
        label.htmlFor = input.id;
        label.title = valor + " estrelas";

        container.appendChild(input);
        container.appendChild(label);
    });
});
</script>
{% endblock %}
