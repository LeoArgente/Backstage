{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Comunidade - Backstage</title>
  <link rel="icon" type="image/png" href="{% static 'images/Icone_Backstage.png' %}">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'css/main.css' %}">
  <link rel="stylesheet" href="{% static 'css/community.css' %}">
  <link rel="stylesheet" href="{% static 'css/movies.css' %}">
  <link rel="stylesheet" href="{% static 'css/dropdown.css' %}">
  <link rel="stylesheet" href="{% static 'css/mobile.css' %}">
</head>
<body>
  {% csrf_token %}
  {% include 'backstage/_mobile_header.html' %}
  <header class="site-header">
    <div class="container">
      <nav class="nav-primary">
                <a class="brand" href="{% url 'backstage:index' %}">
            <img src="{% static 'images/Logo_Backstage_branca.png' %}"
                 alt="Backstage Logo"
                 width="250">
                </a>

        <div class="nav-menu">
          <a href="{% url 'backstage:index' %}" class="nav-link">Início</a>
          <a href="{% url 'backstage:movies' %}" class="nav-link">Filmes</a>
          <a href="{% url 'backstage:series' %}" class="nav-link">Séries</a>
          <a href="{% url 'backstage:lists' %}" class="nav-link">Listas</a>
          <a href="{% url 'backstage:comunidade' %}" class="nav-link active">Comunidade</a>
        </div>

        <div class="nav-actions">
          <form method="get" action="{% url 'backstage:buscar' %}" class="search-container">
            <svg class="search-icon" width="18" height="18" viewBox="0 0 24 24" fill="none">
              <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
              <path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            <input type="search" name="q" class="search-input" placeholder="Buscar filmes, séries..." autocomplete="off" />
            <input type="hidden" name="tipo" value="titulo" />
            <div class="search-suggestions"></div>
          </form>

          <div class="filter-controls header-filter-controls">
            <button type="button" class="filter-btn" id="filterBtn" aria-label="Filtros">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                <path d="M3 4h18l-7 8v6l-4 2v-8L3 4z" stroke="currentColor" stroke-width="2"/>
              </svg>
            </button>

            <div class="filter-popup" id="filterPopup">
              <div class="filter-content">
                <h3>Filtros de busca</h3>
                <form method="get" action="{% url 'backstage:buscar' %}">
                  <select name="tipo" id="tipoSelect">
                    <option value="">Escolha o tipo de filtro</option>
                    <option value="titulo">Título</option>
                    <option value="genero">Gênero</option>
                    <option value="ano">Ano</option>
                  </select>
                  <div id="filtroAno" style="display:none;">
                    <label for="anoInput">Ano:</label>
                    <input type="number" name="ano" placeholder="Ex: 2024" id="anoInput">
                  </div>
                  <div id="filtroGenero" style="display:none;">
                    <label for="generoSelect">Gênero:</label>
                    <select name="genero" id="generoSelect">
                      <option value="">Selecione um gênero</option>
                      <option value="Ação">Ação</option>
                      <option value="Aventura">Aventura</option>
                      <option value="Comédia">Comédia</option>
                      <option value="Drama">Drama</option>
                      <option value="Fantasia">Fantasia</option>
                      <option value="Ficção Científica">Ficção Científica</option>
                      <option value="Romance">Romance</option>
                      <option value="Suspense">Suspense</option>
                      <option value="Terror">Terror</option>
                      <option value="Animação">Animação</option>
                      <option value="Documentário">Documentário</option>
                    </select>
                  </div>
                  <button type="submit">Aplicar filtros</button>
                </form>
              </div>
            </div>
          </div>

          {% include 'backstage/_notifications.html' %}

          {% include 'backstage/_user_dropdown.html' %}
        </div>
      </nav>
    </div>
  </header>

  <div class="page-header">
    <div class="container">
      <div class="page-header-content">
        <h1 class="page-title">Comunidade</h1>
        <p class="page-description">Conecte-se com outros amantes do cinema e compartilhe suas paixões cinematográficas</p>

        <button class="btn btn-primary create-community-btn" id="create-community-btn">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 5v14M5 12h14"/>
          </svg>
          Criar Comunidade
        </button>
      </div>
    </div>
  </div>

  <main class="container">
    <!-- Minhas Comunidades Section -->
    {% if user.is_authenticated and minhas_comunidades %}
    <section class="communities-section">
      <div class="section-header">
        <h2 class="section-title">Minhas Comunidades</h2>
        <p class="section-description">Comunidades que você faz parte</p>
      </div>

      <div class="communities-grid">
        {% for membro in minhas_comunidades %}
        <div class="community-card">
          <img src="https://i.pinimg.com/1200x/bd/e3/e0/bde3e0aaf3dd35b4a42eed8ba9980591.jpg" alt="{{ membro.comunidade.nome }}" class="community-icon-img">
          <div class="community-content">
            <h3 class="community-name">{{ membro.comunidade.nome }}</h3>
            <p class="community-description">{{ membro.comunidade.descricao|truncatewords:20 }}</p>
            <div class="community-stats">
              <span class="stat">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                  <circle cx="9" cy="7" r="4"/>
                  <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                  <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                </svg>
                {{ membro.comunidade.membros.count }} membros
              </span>
              <span class="stat">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                </svg>
                0 posts
              </span>
            </div>
            <div class="community-tags">
              <span class="tag">{{ membro.get_role_display }}</span>
            </div>
          </div>
          <a href="{% url 'backstage:detalhes_comunidade' membro.comunidade.slug %}" class="btn-join joined">Ver Comunidade</a>
        </div>
        {% endfor %}
      </div>
    </section>
    {% endif %}

    <!-- Communities Section -->
    <section class="communities-section">
      <div class="section-header">
        <h2 class="section-title">{% if user.is_authenticated and minhas_comunidades %}Outras Comunidades{% else %}Comunidades Populares{% endif %}</h2>
        <p class="section-description">Junte-se a comunidades de fãs apaixonados por cinema e séries</p>
      </div>

      <div class="communities-grid">
        {% for comunidade in comunidades_publicas %}
        <div class="community-card">
          <img src="https://i.pinimg.com/1200x/bd/e3/e0/bde3e0aaf3dd35b4a42eed8ba9980591.jpg" alt="{{ comunidade.nome }}" class="community-icon-img">
          <div class="community-content">
            <h3 class="community-name">{{ comunidade.nome }}</h3>
            <p class="community-description">{{ comunidade.descricao|truncatewords:20 }}</p>
            <div class="community-stats">
              <span class="stat">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                  <circle cx="9" cy="7" r="4"/>
                  <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                  <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                </svg>
                {{ comunidade.membros.count }} membros
              </span>
              <span class="stat">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                </svg>
                0 posts
              </span>
            </div>
            <div class="community-tags">
              <span class="tag">Público</span>
            </div>
          </div>
          <button class="btn-join" data-slug="{{ comunidade.slug }}">Entrar</button>
        </div>
        {% empty %}
        <p style="color: #888; text-align: center; width: 100%; padding: 2rem;">Nenhuma comunidade pública disponível no momento.</p>
        {% endfor %}

        <!-- Action Movies -->
        <div class="community-card">
          <img src="https://i.pinimg.com/1200x/bd/e3/e0/bde3e0aaf3dd35b4a42eed8ba9980591.jpg" alt="Pokemon" class="community-icon-img">
          <div class="community-content">
            <h3 class="community-name">Pokemon</h3>
            <p class="community-description">This is the place for most things Pokémon on Backstage—TV shows, video games, toys, trading cards, you name it!</p>
            <div class="community-stats">
              <span class="stat">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                  <circle cx="9" cy="7" r="4"/>
                  <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                  <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                </svg>
                45.2K membros
              </span>
              <span class="stat">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                </svg>
                2.3K posts
              </span>
            </div>
            <div class="community-tags">
              <span class="tag">Ação</span>
              <span class="tag">Aventura</span>
            </div>
          </div>
          <button class="btn-join">Entrar</button>
        </div>

        <!-- Horror Cinema -->
        <div class="community-card">
          <img src="https://i.pinimg.com/1200x/19/34/db/1934dbf46f158b286ede28d7af926d13.jpg" alt="Cinema de Terror" class="community-icon-img">
          <div class="community-content">
            <h3 class="community-name">StarWarsFans</h3>
            <p class="community-description">Unofficial community for Star Wars, an American epic space opera franchise, created by George Lucas and centered around a film series that began with the eponymous 1977 movie.</p>
            <div class="community-stats">
              <span class="stat">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                  <circle cx="9" cy="7" r="4"/>
                  <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                  <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                </svg>
                38.7K membros
              </span>
              <span class="stat">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                </svg>
                1.8K posts
              </span>
            </div>
            <div class="community-tags">
              <span class="tag">Ficção Científica</span>
              <span class="tag">Ação</span>
            </div>
          </div>
          <button class="btn-join">Entrar</button>
        </div>

        <!-- SciFi Films -->
        <div class="community-card">
          <img src="https://i.pinimg.com/1200x/a4/2b/be/a42bbe73726812a739f25fd31f45c2a6.jpg" alt="Ficção Científica" class="community-icon-img">
          <div class="community-content">
            <h3 class="community-name">DCcomics</h3>
            <p class="community-description">The unofficial DC Comics backstage A place for fans of DC's comics, graphic novels, movies, and anything else related to one of the largest comic book publishers in the world and home of the World's Greatest Superheroes! Featuring weekly comic release discussions, creator AMAs, a friendly and helpful userbase, and much more!</p>
            <div class="community-stats">
              <span class="stat">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                  <circle cx="9" cy="7" r="4"/>
                  <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                  <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                </svg>
                52.1K membros
              </span>
              <span class="stat">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                </svg>
                3.1K posts
              </span>
            </div>
            <div class="community-tags">
              <span class="tag">DCU</span>
              <span class="tag">Super-heróis</span>
            </div>
          </div>
          <button class="btn-join">Entrar</button>
        </div>

        <!-- Marvel Studios -->
        <div class="community-card">
          <img src="https://i.pinimg.com/1200x/27/de/63/27de63303feee6d986d63e0ba21a0edf.jpg" alt="Marvel Studios" class="community-icon-img">
          <div class="community-content">
            <h3 class="community-name">Marvelstudios</h3>
            <p class="community-description">Discussões sobre o MCU, teorias sobre próximos filmes e tudo sobre os heróis da Marvel.</p>
            <div class="community-stats">
              <span class="stat">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                  <circle cx="9" cy="7" r="4"/>
                  <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                  <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                </svg>
                128.5K membros
              </span>
              <span class="stat">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                </svg>
                8.7K posts
              </span>
            </div>
            <div class="community-tags">
              <span class="tag">MCU</span>
              <span class="tag">Super-heróis</span>
            </div>
          </div>
          <button class="btn-join">Entrar</button>
        </div>

        <!-- Anime Discussion -->
        <div class="community-card">
          <img src="https://i.pinimg.com/1200x/cc/21/6c/cc216c94afc4c4c04a56c0a5aae5f5b5.jpg" alt="Anime & Mangá" class="community-icon-img">
          <div class="community-content">
            <h3 class="community-name">Anime</h3>
            <p class="community-description">Backstage's premier anime community.</p>
            <div class="community-stats">
              <span class="stat">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                  <circle cx="9" cy="7" r="4"/>
                  <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                  <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                </svg>
                94.3K membros
              </span>
              <span class="stat">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                </svg>
                6.2K posts
              </span>
            </div>
            <div class="community-tags">
              <span class="tag">Anime</span>
              <span class="tag">Mangá</span>
            </div>
          </div>
          <button class="btn-join">Entrar</button>
        </div>

        <!-- Movie Theories -->
        <div class="community-card">
          <img src="https://i.pinimg.com/736x/6e/e0/83/6ee083060bcc8c85ce2c5f2347ce5503.jpg" alt="Teorias Cinematográficas" class="community-icon-img">
          <div class="community-content">
            <h3 class="community-name">Doramas_br</h3>
            <p class="community-description">Sua casa brasileira para tudo sobre Doramas! Compartilhe memes, peça e dê recomendações de K-dramas, J-dramas, C-dramas e T-dramas.</p>
            <div class="community-stats">
              <span class="stat">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                  <circle cx="9" cy="7" r="4"/>
                  <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                  <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                </svg>
                67.8K membros
              </span>
              <span class="stat">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                </svg>
                4.5K posts
              </span>
            </div>
            <div class="community-tags">
              <span class="tag">Teorias</span>
              <span class="tag">Análises</span>
            </div>
          </div>
          <button class="btn-join">Entrar</button>
        </div>

        <!-- Classic Cinema -->
        <div class="community-card">
          <img src="https://images.unsplash.com/photo-1440404653325-ab127d49abc1?w=200&h=200&fit=crop" alt="Cinema Clássico" class="community-icon-img">
          <div class="community-content">
            <h3 class="community-name">Cinema Clássico</h3>
            <p class="community-description">Apreciadores de filmes antigos, cinema noir e obras-primas do passado que moldaram o cinema.</p>
            <div class="community-stats">
              <span class="stat">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                  <circle cx="9" cy="7" r="4"/>
                  <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                  <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                </svg>
                31.4K membros
              </span>
              <span class="stat">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                </svg>
                1.2K posts
              </span>
            </div>
            <div class="community-tags">
              <span class="tag">Clássicos</span>
              <span class="tag">Noir</span>
            </div>
          </div>
          <button class="btn-join">Entrar</button>
        </div>

        <!-- True Crime Docs -->
        <div class="community-card">
          <img src="https://images.unsplash.com/photo-1505330622279-bf7d7fc918f4?w=200&h=200&fit=crop" alt="Documentários True Crime" class="community-icon-img">
          <div class="community-content">
            <h3 class="community-name">Documentários True Crime</h3>
            <p class="community-description">Casos reais, investigações e mistérios não resolvidos. Discussões sobre os melhores documentários.</p>
            <div class="community-stats">
              <span class="stat">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                  <circle cx="9" cy="7" r="4"/>
                  <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                  <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                </svg>
                76.9K membros
              </span>
              <span class="stat">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                </svg>
                5.3K posts
              </span>
            </div>
            <div class="community-tags">
              <span class="tag">Documentário</span>
              <span class="tag">True Crime</span>
            </div>
          </div>
          <button class="btn-join">Entrar</button>
        </div>

        <!-- Netflix Originals -->
        <div class="community-card">
          <img src="https://images.unsplash.com/photo-1574267432644-f610cab4b06b?w=200&h=200&fit=crop" alt="Séries da Netflix" class="community-icon-img">
          <div class="community-content">
            <h3 class="community-name">Séries da Netflix</h3>
            <p class="community-description">Tudo sobre originais Netflix: lançamentos, discussões de episódios e recomendações.</p>
            <div class="community-stats">
              <span class="stat">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                  <circle cx="9" cy="7" r="4"/>
                  <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                  <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                </svg>
                112.7K membros
              </span>
              <span class="stat">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                </svg>
                7.9K posts
              </span>
            </div>
            <div class="community-tags">
              <span class="tag">Netflix</span>
              <span class="tag">Séries</span>
            </div>
          </div>
          <button class="btn-join">Entrar</button>
        </div>

      </div>
    </section>

    <div class="community-layout">
    
      <aside class="community-sidebar">
        <div class="sidebar-section">
          <h3 class="sidebar-title">Atividade Recente</h3>
          <div class="activity-feed" id="activity-feed">
            <!-- Activity items will be populated by JavaScript -->
          </div>
        </div>

        <div class="sidebar-section">
          <h3 class="sidebar-title">Membros Ativos</h3>
          <div class="active-members" id="active-members">
            <!-- Active members will be populated by JavaScript -->
          </div>
        </div>
      </aside>

      <!-- Main Feed -->
      <div class="community-main">
        <!-- Post Creation -->
        <div class="create-post-card">
          <div class="create-post-header">
            {% if user.profile.foto_perfil %}
              <img src="{{ user.profile.foto_perfil.url }}" alt="Seu avatar" class="user-avatar-img" />
            {% else %}
              <img src="{% static 'images/default-avatar.png' %}" alt="Seu avatar" class="user-avatar-img" />
            {% endif %}
            <button class="create-post-btn" id="create-post-btn">
              O que você está assistindo?
            </button>
          </div>
          
          <div class="create-post-actions">
            <button class="post-action-btn" data-type="review">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
              </svg>
              Avaliar
            </button>
            <button class="post-action-btn" data-type="list">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 5H7a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"/>
                <rect x="9" y="3" width="6" height="4" rx="2"/>
              </svg>
              Lista
            </button>
            <button class="post-action-btn" data-type="recommendation">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
              </svg>
              Recomendar
            </button>
          </div>
        </div>

        <!-- Filter Tabs -->
        <div class="feed-filters">
          <button class="filter-tab active" data-filter="all">Todos os Posts</button>
          <button class="filter-tab" data-filter="reviews">Avaliações</button>
          <button class="filter-tab" data-filter="discussions">Discussões</button>
          <button class="filter-tab" data-filter="recommendations">Recomendações</button>
          <button class="filter-tab" data-filter="lists">Listas</button>
        </div>

        <!-- Posts Feed -->
        <div class="posts-feed" id="posts-feed">
          <!-- Posts will be populated by JavaScript -->
        </div>

        <div class="load-more-section">
          <button class="btn btn-secondary btn-large load-more-btn" id="load-more">
            Carregar mais posts
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 5v14M5 12h14"/>
            </svg>
          </button>
        </div>
      </div>

    </div>
  </main>

  <!-- Create Post Modal -->
  <div class="modal-overlay" id="create-post-modal">
    <div class="modal large-modal">
      <div class="modal-header">
        <h2>Criar Post</h2>
        <button class="modal-close" id="modal-close">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      
      <form class="modal-form" id="create-post-form">
        <div class="form-group">
          <label for="post-type">Tipo de Post</label>
          <select id="post-type" name="type" required>
            <option value="discussion">Discussão</option>
            <option value="review">Avaliação</option>
            <option value="recommendation">Recomendação</option>
            <option value="list">Lista</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="post-content">Conteúdo</label>
          <textarea id="post-content" name="content" placeholder="Compartilhe seus pensamentos..." rows="6" required></textarea>
        </div>
        
        <div class="form-group movie-selector" id="movie-selector" style="display: none;">
          <label for="selected-movie">Filme/Série</label>
          <input type="text" id="selected-movie" placeholder="Buscar filme ou série..." />
          <div class="movie-suggestions" id="movie-suggestions"></div>
        </div>
        
        <div class="form-group rating-selector" id="rating-selector" style="display: none;">
          <label>Avaliação</label>
          <div class="star-rating" id="star-rating">
            <button type="button" class="star" data-rating="1">★</button>
            <button type="button" class="star" data-rating="2">★</button>
            <button type="button" class="star" data-rating="3">★</button>
            <button type="button" class="star" data-rating="4">★</button>
            <button type="button" class="star" data-rating="5">★</button>
          </div>
        </div>
        
        <div class="form-actions">
          <button type="button" class="btn btn-secondary" id="cancel-post">Cancelar</button>
          <button type="submit" class="btn btn-primary">Publicar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Create Community Modal -->
  <div class="modal-overlay" id="create-community-modal">
    <div class="modal">
      <div class="modal-header">
        <h2>Nova Comunidade</h2>
        <button class="modal-close" id="community-modal-close">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>

      <form class="modal-form" id="create-community-form">
        <div class="form-group">
          <label for="community-name">Nome</label>
          <input type="text" id="community-name" name="name" placeholder="Ex: Amantes de Ficção Científica" required>
        </div>

        <div class="form-group">
          <label for="community-description">Descrição</label>
          <textarea id="community-description" name="description" placeholder="Descreva o propósito da sua comunidade..." rows="4" required></textarea>
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-secondary" id="cancel-community">Cancelar</button>
          <button type="submit" class="btn btn-primary">Criar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <div class="brand">
            <img src="{% static 'images/Logo_Backstage_branca.png' %}"
                 alt="Backstage Logo"
                 width="40" height="40">
          </div>
          <p class="footer-description">
            Sua jornada cinematográfica começa aqui. Entre no Backstage e registre cada frame.
          </p>
        </div>
        
        <div class="footer-section">
          <h3 class="footer-title">Explorar</h3>
          <ul class="footer-links">
            <li><a href="{% url 'backstage:index' %}">Início</a></li>
            <li><a href="{% url 'backstage:movies' %}">Filmes</a></li>
            <li><a href="{% url 'backstage:series' %}">Séries</a></li>
            <li><a href="{% url 'backstage:lists' %}">Listas</a></li>
            <li><a href="{% url 'backstage:comunidade' %}">Comunidade</a></li>
          </ul>
        </div>
        
        <div class="footer-section">
          <h3 class="footer-title">Suporte</h3>
          <ul class="footer-links">
            <li><a href="#">Ajuda</a></li>
            <li><a href="#">Contato</a></li>
            <li><a href="#">Política de Privacidade</a></li>
            <li><a href="#">Termos de Uso</a></li>
          </ul>
        </div>
        
        <div class="footer-section">
          <h3 class="footer-title">Conecte-se</h3>
          <div class="social-links">
            <a href="#" class="social-link" aria-label="TikTok">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2v10.5A4.5 4.5 0 1 0 16.5 16V8h3V2h-7.5z"/>
              </svg>
            </a>
            <a href="#" class="social-link" aria-label="Twitter">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
              </svg>
            </a>
            <a href="#" class="social-link" aria-label="Facebook">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path d="M22 12a10 10 0 1 0-11.5 9.9V14.9h-2v-2.5h2v-1.9c0-2 1.2-3.1 3-3.1.9 0 1.8.1 1.8.1v2h-1c-1 0-1.3.6-1.3 1.2v1.8h2.2L18 14.9h-2v6.9A10 10 0 0 0 22 12z"/>
              </svg>
            </a>
            <a href="#" class="social-link" aria-label="YouTube">
              <svg width="20" height="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <rect x="2" y="6" width="20" height="12" rx="3" stroke="currentColor" stroke-width="1.2" fill="none"/>
                <path d="M10 9l6 3-6 3V9z" fill="currentColor"/>
              </svg>
            </a>
            <a href="#" class="social-link" aria-label="LinkedIn">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <rect x="2" y="2" width="20" height="20" rx="2" stroke="currentColor" stroke-width="1.2" fill="none"/>
                <path d="M7 9h2v8H7zM8 6.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2zM11 9h2v1.1c.3-.6 1-1.1 2-1.1 2 0 3 1.2 3 3.6V17h-2v-4c0-1-0.5-1.9-1.7-1.9-1 0-1.6.7-1.9 1.4-.1.2-.1.5-.1.8V17h-2V9z"/>
              </svg>
            </a>
          </div>
        </div>
      </div>
      
      <div class="footer-bottom">
        <p>&copy; 2025 Backstage. Todos os direitos reservados.</p>
      </div>
    </div>
  </footer>

  {% include 'backstage/_mobile_search.html' %}
  {% include 'backstage/_mobile_bottom_nav.html' %}
  {% include 'backstage/_mobile_scripts.html' %}

  <script src="{% static 'js/main.js' %}" defer></script>
  <script src="{% static 'js/community.js' %}" defer></script>
  <script src="{% static 'js/filter-popup.js' %}" defer></script>
  <script src="{% static 'js/search-suggestions.js' %}" defer></script>
  <script src="{% static 'js/profile_menu.js' %}"></script>
  <script src="{% static 'js/notifications.js' %}" defer></script>
</body>
</html>